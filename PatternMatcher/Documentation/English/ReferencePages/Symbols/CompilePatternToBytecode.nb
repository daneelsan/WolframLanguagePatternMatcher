(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Wolfram 14.3' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       154,          7]
NotebookDataLength[     57022,       1334]
NotebookOptionsPosition[     49822,       1180]
NotebookOutlinePosition[     50608,       1206]
CellTagsIndexPosition[     50528,       1201]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["CompilePatternToBytecode", "ObjectName",
 CellID->1932181080,ExpressionUUID->"a177e5dd-4cac-4314-913c-44b4bb2d9225"],

Cell[TextData[{
 Cell["   ", "ModInfo",ExpressionUUID->"a06952b9-1556-402e-9a28-8492ed23badb"],
 Cell[BoxData[
  RowBox[{
   ButtonBox["CompilePatternToBytecode",
    BaseStyle->"Link",
    ButtonData->
     "paclet:DanielSPatternMatcherVM/ref/CompilePatternToBytecode"], "[", 
   StyleBox["patt", "TI"], "]"}]], "InlineFormula",ExpressionUUID->
  "c3ba006b-4567-4fcc-93bc-b2faf5d5e139"],
 "\[LineSeparator]converts a pattern expression into bytecode to be run in a \
virtual machine."
}], "Usage",
 CellChangeTimes->{3.9605941437781887`*^9},
 CellID->2067185273,ExpressionUUID->"6c6c1894-1499-4ab0-bfd4-ddd35b734f5a"],

Cell[TextData[{
 "The argument to ",
 Cell[BoxData[
  ButtonBox["CompilePatternToBytecode",
   BaseStyle->"Link",
   ButtonData->
    "paclet:DanielS/PatternMatcherVM/ref/CompilePatternToBytecode"]], 
  "InlineFormula",ExpressionUUID->"fa67c2bd-2801-4d8e-863e-bf6943d99ad9"],
 " can be any Wolfram Language expression."
}], "Notes",
 CellChangeTimes->{{3.960645772265802*^9, 3.9606458027685823`*^9}},
 CellID->1192442145,ExpressionUUID->"ca996759-1bf3-4ce0-946d-5cad530b1aa0"],

Cell[TextData[{
 "The result is a ",
 Cell[BoxData[
  ButtonBox["PatternBytecode",
   BaseStyle->"Link",
   ButtonData->"paclet:DanielS/PatternMatcherVM/ref/PatternBytecode"]], 
  "InlineFormula",ExpressionUUID->"0c948a57-15bf-4ad4-a960-0641887a7e38"],
 " object."
}], "Notes",
 CellChangeTimes->{{3.9606458058399487`*^9, 3.960645823999166*^9}},
 CellID->835744468,ExpressionUUID->"c32bc7d6-6320-4edd-89c9-33176855cfd5"]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[{
 "See Also",
 Cell[BoxData[
  TemplateBox[{"SeeAlso", 
    Cell[
     BoxData[
      FrameBox[
       Cell[
       "Insert links to any related reference (function) pages.", 
        "MoreInfoText"], BaseStyle -> "IFrameBox"]], "MoreInfoTextOuter"]},
   "MoreInfoOpenerButtonTemplate"]],ExpressionUUID->
  "fce776dd-193f-46ed-a1fd-cf8c881e16f2"]
}], "SeeAlsoSection",
 CellID->1057737211,ExpressionUUID->"3fa5780a-4835-4279-8731-2194f63b7ed9"],

Cell[TextData[{
 Cell[BoxData[
  ButtonBox["PatternBytecode",
   BaseStyle->"Link",
   ButtonData->"paclet:DanielS/PatternMatcherVM/ref/PatternBytecode"]], 
  "InlineSeeAlsoFunction",
  TaggingRules->{"PageType" -> "Function"},ExpressionUUID->
  "ccd8b6ed-0579-404e-a9aa-ce95a48494ed"],
 StyleBox[" \[FilledVerySmallSquare] ", "InlineSeparator"],
 Cell[BoxData[
  ButtonBox["PatternMatcherVirtualMachine",
   BaseStyle->"Link",
   ButtonData->
    "paclet:DanielS/PatternMatcherVM/ref/PatternMatcherVirtualMachine"]], 
  "InlineSeeAlsoFunction",
  TaggingRules->{"PageType" -> "Function"},ExpressionUUID->
  "352bc0d9-c91e-42fe-b703-08c5e07c59f8"],
 StyleBox[" \[FilledVerySmallSquare] ", "InlineSeparator"],
 Cell[BoxData[
  ButtonBox["PatternMatcherMatch",
   BaseStyle->"Link",
   ButtonData->"paclet:DanielS/PatternMatcherVM/ref/PatternMatcherMatch"]], 
  "InlineSeeAlsoFunction",
  TaggingRules->{"PageType" -> "Function"},ExpressionUUID->
  "8680379e-0e1b-4f0e-a94f-c94096ac3e2c"],
 StyleBox[" \[FilledVerySmallSquare] ", "InlineSeparator"],
 Cell[BoxData[
  ButtonBox["PatternMatcherStep",
   BaseStyle->"Link",
   ButtonData->"paclet:DanielS/PatternMatcherVM/ref/PatternMatcherStep"]], 
  "InlineSeeAlsoFunction",
  TaggingRules->{"PageType" -> "Function"},ExpressionUUID->
  "0f16d3bc-a238-49f2-b867-eeaec1117727"],
 Cell[BoxData[
  RowBox[{
  Cell[TextData[StyleBox[
   " \[FilledVerySmallSquare] ", "InlineSeparator"]],ExpressionUUID->
    "797a61e9-1c8d-420b-a899-3ebd3e0d49a2"], 
   DynamicModuleBox[{$CellContext`nbobj$$ = NotebookObject[
    "4b123b97-a670-4515-8446-e85241900301", 
     "88fabb2e-df6a-41c2-b576-5a07cfff4f49"], $CellContext`cellobj$$ = 
    CellObject[
    "f94fcd89-2a1f-4c84-ade3-7eadd91c249c", 
     "7ce200bb-6384-473b-b105-a4db63a38a9f"]}, 
    TemplateBox[{
      GraphicsBox[{{
         Thickness[0.06], 
         StrokeForm[
          Hue[0.4167, 0.406, 0.502]], 
         CircleBox[{0, 0}]}, {
         Thickness[0.06], 
         StrokeForm[
          Hue[0.4167, 0.406, 0.502]], 
         LineBox[{{0, 0.62}, {0, -0.62}}]}, {
         Thickness[0.06], 
         StrokeForm[
          Hue[0.4167, 0.406, 0.502]], 
         LineBox[{{-0.62, 0}, {0.62, 0}}]}}, 
       ImagePadding -> {{1., 1.}, {2.4, 1.}}, ImageSize -> 16, 
       PlotRange -> {{-1.06, 1.06}, {-1.06, 1.06}}, 
       BaselinePosition -> (Center -> 
        Center)], $CellContext`nbobj$$, $CellContext`cellobj$$},
     "InlineListingAddButton"],
    Initialization:>($CellContext`nbobj$$ = 
      EvaluationNotebook[]; $CellContext`cellobj$$ = EvaluationCell[])]}]], 
  "InlineListingAddButton",ExpressionUUID->
  "f94fcd89-2a1f-4c84-ade3-7eadd91c249c"]
}], "SeeAlso",
 CellChangeTimes->{{3.9606453545534163`*^9, 3.960645373762314*^9}},
 CellID->519675411,ExpressionUUID->"722a4544-d503-4cef-a816-c309b5bad9a8"]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[{
 "Tech Notes",
 Cell[BoxData[
  TemplateBox[{"TechNotes", 
    Cell[
     BoxData[
      FrameBox[
       Cell["Insert links to related tech notes.", "MoreInfoText"], BaseStyle -> 
       "IFrameBox"]], "MoreInfoTextOuter"]},
   "MoreInfoOpenerButtonTemplate"]],ExpressionUUID->
  "cefe492d-9d3c-45b7-8df0-bbd4f3295579"]
}], "TechNotesSection",
 CellID->368640328,ExpressionUUID->"f59f5083-9df2-41e8-96ce-4180c34fe222"],

Cell["XXXX", "Tutorials",
 CellID->247671101,ExpressionUUID->"82b52c0d-6454-4edb-903e-cc1862d0ad94"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Related Guides", "MoreAboutSection",
 CellID->784886621,ExpressionUUID->"7f923b22-ecdc-4140-b437-661f5c891a3f"],

Cell[TextData[ButtonBox["The Pattern Matcher Virtual Machine",
 BaseStyle->"Link",
 ButtonData->
  "paclet:DanielS/PatternMatcherVM/guide/ThePatternMatcherVirtualMachine"]], \
"MoreAbout",
 CellChangeTimes->{{3.960648097017188*^9, 3.9606481047695303`*^9}},
 CellID->1744879273,ExpressionUUID->"2fc837e6-b864-44e1-8e89-68ae90ae79cc"]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[{
 "Related Links",
 Cell[BoxData[
  TemplateBox[{"RelatedLinks", 
    Cell[
     BoxData[
      FrameBox[
       Cell[
       "Insert links to any related page, including web pages.", 
        "MoreInfoText"], BaseStyle -> "IFrameBox"]], "MoreInfoTextOuter"]},
   "MoreInfoOpenerButtonTemplate"]],ExpressionUUID->
  "6b54e643-9381-4caf-8a3c-6b1697ba009a"]
}], "RelatedLinksSection",
 CellID->149257879,ExpressionUUID->"1cb0a833-17ae-4c85-a5ce-5f2fdf4ebe1b"],

Cell["XXXX", "RelatedLinks",
 CellID->316272657,ExpressionUUID->"a921b8e2-564b-44d9-a48b-10e9a260843a"]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[{
 "Examples Initialization",
 Cell[BoxData[
  TemplateBox[{"ExamplesInitialization", 
    Cell[
     BoxData[
      FrameBox[
       Cell[
       "Input that is to be evaluated before any examples are run, e.g. \
Needs[\[Ellipsis]].", "MoreInfoText"], BaseStyle -> "IFrameBox"]], 
     "MoreInfoTextOuter"]},
   "MoreInfoOpenerButtonTemplate"]],ExpressionUUID->
  "1ec2b662-f111-4c89-bf83-59dad3fe16ac"]
}], "ExamplesInitializationSection",
 CellID->572519874,ExpressionUUID->"c18bbe72-a682-4eca-bd7c-02733188f7f6"],

Cell[BoxData[
 RowBox[{"Needs", "[", "\"\<DanielS`PatternMatcherVM`\>\"", 
  "]"}]], "ExampleInitialization",
 CellID->1614783758,ExpressionUUID->"8d37789e-7429-4786-a158-de7605896921"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[GridBox[{
    {
     StyleBox[
      RowBox[{"Basic", " ", "Examples"}], "PrimaryExamplesSection"], 
     ButtonBox[
      RowBox[{
       RowBox[{"More", " ", "Examples"}], " ", "\[RightTriangle]"}],
      BaseStyle->"ExtendedExamplesLink",
      ButtonData:>"ExtendedExamples"]}
   }],
  $Line = 0; Null]], "PrimaryExamplesSection",
 CellID->1919773567,ExpressionUUID->"df914ba9-2912-4788-af06-8e911aa51f57"],

Cell["Compile a pattern expression to bytecode:", "ExampleText",
 CellChangeTimes->{{3.960647351624917*^9, 3.960647361956934*^9}},
 CellID->739927290,ExpressionUUID->"a704b8e1-efc5-4cb0-aa14-f722fda5727f"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"patt", "=", 
  RowBox[{"CompilePatternToBytecode", "[", 
   RowBox[{"f", "[", 
    RowBox[{"x_", ",", "x_"}], "]"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.960647366561865*^9, 3.9606473750984077`*^9}, {
  3.96064741897651*^9, 3.960647419804514*^9}},
 CellLabel->"In[17]:=",
 CellID->5270763,ExpressionUUID->"8500a56d-9722-4407-8084-f5289fd1f328"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{
   TagBox["PatternBytecode",
    "SummaryHead"], "[", 
   DynamicModuleBox[{Typeset`open$$ = False, Typeset`embedState$$ = "Ready"}, 
    
    TemplateBox[{
      PaneSelectorBox[{False -> GridBox[{{
            PaneBox[
             ButtonBox[
              DynamicBox[
               FEPrivate`FrontEndResource["FEBitmaps", "SummaryBoxOpener"], 
               ImageSizeCache -> {
                9.875531250000002, {0., 9.875531250000002}}], Appearance -> 
              None, BaseStyle -> {}, 
              ButtonFunction :> (Typeset`open$$ = True), Evaluator -> 
              Automatic, Method -> "Preemptive"], 
             Alignment -> {Center, Center}, ImageSize -> 
             Dynamic[{
               Automatic, 
                3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                 Magnification])}]], 
            GridBox[{{
               RowBox[{
                 TagBox["\"Pattern: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                  TemplateBox[{
                    RowBox[{"f", "[", 
                    RowBox[{"x_", ",", "x_"}], "]"}]}, "ClickToCopy"], 
                  "SummaryItem"]}]}}, AutoDelete -> False, 
             BaseStyle -> {
              ShowStringCharacters -> False, NumberMarks -> False, 
               PrintPrecision -> 3, ShowSyntaxStyles -> False}, 
             GridBoxAlignment -> {
              "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, 
             GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {
              "Columns" -> {{2}}, "Rows" -> {{Automatic}}}]}}, AutoDelete -> 
          False, BaselinePosition -> {1, 1}, 
          GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
          GridBoxItemSize -> {
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}], True -> 
        GridBox[{{
            PaneBox[
             ButtonBox[
              DynamicBox[
               FEPrivate`FrontEndResource["FEBitmaps", "SummaryBoxCloser"]], 
              Appearance -> None, BaseStyle -> {}, 
              ButtonFunction :> (Typeset`open$$ = False), Evaluator -> 
              Automatic, Method -> "Preemptive"], 
             Alignment -> {Center, Center}, ImageSize -> 
             Dynamic[{
               Automatic, 
                3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                 Magnification])}]], 
            GridBox[{{
               RowBox[{
                 TagBox["\"Pattern: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                  TemplateBox[{
                    RowBox[{"f", "[", 
                    RowBox[{"x_", ",", "x_"}], "]"}]}, "ClickToCopy"], 
                  "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"Bytecode: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                  
                  TemplateBox[{
                   "\"PUSH_EXPR\\nTEST_LENGTH 2\\nGET_HEAD\\nPUSH_SYMBOL \
HoldComplete[f]\\nSAMEQ\\nAND\\nGET_PART 1\\nBIND_VAR \
Global`x\\nPUSH_TRUE\\nGET_PART 2\\nGET_VAR Global`x\\nSAMEQ\"", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"{", "\"PUSH_EXPR\"", "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"\"TEST_LENGTH\"", ",", 
                    RowBox[{"{", 
                    RowBox[{"\"int\"", ",", "2"}], "}"}]}], "}"}], ",", 
                    RowBox[{"{", "\"GET_HEAD\"", "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"\"PUSH_SYMBOL\"", ",", 
                    RowBox[{"{", 
                    RowBox[{"\"sym\"", ",", 
                    RowBox[{"HoldComplete", "[", "f", "]"}]}], "}"}]}], "}"}],
                     ",", 
                    RowBox[{"{", "\"SAMEQ\"", "}"}], ",", 
                    RowBox[{"{", "\"AND\"", "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"\"GET_PART\"", ",", 
                    RowBox[{"{", 
                    RowBox[{"\"int\"", ",", "1"}], "}"}]}], "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"\"BIND_VAR\"", ",", 
                    RowBox[{"{", 
                    RowBox[{"\"var\"", ",", "\"Global`x\""}], "}"}]}], "}"}], 
                    ",", 
                    RowBox[{"{", "\"PUSH_TRUE\"", "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"\"GET_PART\"", ",", 
                    RowBox[{"{", 
                    RowBox[{"\"int\"", ",", "2"}], "}"}]}], "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"\"GET_VAR\"", ",", 
                    RowBox[{"{", 
                    RowBox[{"\"var\"", ",", "\"Global`x\""}], "}"}]}], "}"}], 
                    ",", 
                    RowBox[{"{", "\"SAMEQ\"", "}"}]}], "}"}]}, 
                   "ClickToCopy2"], "SummaryItem"]}]}}, AutoDelete -> False, 
             BaseStyle -> {
              ShowStringCharacters -> False, NumberMarks -> False, 
               PrintPrecision -> 3, ShowSyntaxStyles -> False}, 
             GridBoxAlignment -> {
              "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, 
             GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {
              "Columns" -> {{2}}, "Rows" -> {{Automatic}}}]}}, AutoDelete -> 
          False, BaselinePosition -> {1, 1}, 
          GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
          GridBoxItemSize -> {
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}]}, 
       Dynamic[Typeset`open$$], ImageSize -> Automatic]},
     "SummaryPanel"],
    DynamicModuleValues:>{}], "]"}],
  DanielS`PatternMatcherVM`PatternBytecode[<|"Pattern" -> $CellContext`f[
      Pattern[$CellContext`x, 
       Blank[]], 
      Pattern[$CellContext`x, 
       Blank[]]], 
    "Bytecode" -> {{"PUSH_EXPR"}, {"TEST_LENGTH", {"int", 2}}, {"GET_HEAD"}, {
      "PUSH_SYMBOL", {"sym", 
        HoldComplete[$CellContext`f]}}, {"SAMEQ"}, {"AND"}, {
      "GET_PART", {"int", 1}}, {"BIND_VAR", {"var", "Global`x"}}, {
      "PUSH_TRUE"}, {"GET_PART", {"int", 2}}, {
      "GET_VAR", {"var", "Global`x"}}, {"SAMEQ"}}, 
    "LexicalEnvironment" -> <|"Global`x" -> 2|>, "CurrentExpr" -> 0, 
    "VarCounter" -> 1|>],
  Editable->False,
  SelectWithContents->True,
  Selectable->False]], "Output",
 CellChangeTimes->{3.9606473754698057`*^9, 3.960647420203924*^9},
 CellLabel->"Out[17]=",
 CellID->1075743001,ExpressionUUID->"88152b38-84a0-4ccd-a5fa-25c45bf63c91"]
}, Open  ]],

Cell["Use the pattern bytecode to create a virtual machine:", "ExampleText",
 CellChangeTimes->{{3.960647351624917*^9, 3.960647361956934*^9}, {
  3.960647425353674*^9, 3.960647433105589*^9}},
 CellID->347793714,ExpressionUUID->"6a30b488-85fc-40e4-b3ba-2f00e0b5427f"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"vm", "=", 
  RowBox[{"CreatePatternMatcherVirtualMachine", "[", "patt", "]"}]}]], "Input",\

 CellChangeTimes->{{3.960647434894725*^9, 3.960647438538651*^9}},
 CellLabel->"In[18]:=",
 CellID->1063267939,ExpressionUUID->"8872eb90-1dd5-4dc2-8743-2c440513159d"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{
   TagBox["PatternMatcherVirtualMachine",
    "SummaryHead"], "[", 
   DynamicModuleBox[{Typeset`open$$ = False, Typeset`embedState$$ = "Ready"}, 
    
    TemplateBox[{
      PaneSelectorBox[{False -> GridBox[{{
            PaneBox[
             ButtonBox[
              DynamicBox[
               FEPrivate`FrontEndResource["FEBitmaps", "SummaryBoxOpener"]], 
              ButtonFunction :> (Typeset`open$$ = True), Appearance -> None, 
              BaseStyle -> {}, Evaluator -> Automatic, Method -> 
              "Preemptive"], Alignment -> {Center, Center}, ImageSize -> 
             Dynamic[{
               Automatic, 
                3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                 Magnification])}]], 
            GridBox[{{
               RowBox[{
                 TagBox["\"Halted: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["False", "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"Program counter: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["1", "SummaryItem"]}]}}, 
             GridBoxAlignment -> {
              "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, AutoDelete -> 
             False, GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {"Columns" -> {{2}}, "Rows" -> {{Automatic}}},
              BaseStyle -> {
              ShowStringCharacters -> False, NumberMarks -> False, 
               PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
          GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
          AutoDelete -> False, 
          GridBoxItemSize -> {
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
          BaselinePosition -> {1, 1}], True -> GridBox[{{
            PaneBox[
             ButtonBox[
              DynamicBox[
               FEPrivate`FrontEndResource["FEBitmaps", "SummaryBoxCloser"]], 
              ButtonFunction :> (Typeset`open$$ = False), Appearance -> None, 
              BaseStyle -> {}, Evaluator -> Automatic, Method -> 
              "Preemptive"], Alignment -> {Center, Center}, ImageSize -> 
             Dynamic[{
               Automatic, 
                3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                 Magnification])}]], 
            GridBox[{{
               RowBox[{
                 TagBox["\"Halted: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["False", "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"Program counter: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["1", "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"Stack: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                  RowBox[{"{", "}"}], "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"Pattern bytecode: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                  InterpretationBox[
                   RowBox[{
                    TagBox["PatternBytecode", "SummaryHead"], "[", 
                    
                    DynamicModuleBox[{
                    Typeset`open$$ = False, Typeset`embedState$$ = "Ready"}, 
                    TemplateBox[{
                    PaneSelectorBox[{False -> GridBox[{{
                    PaneBox[
                    ButtonBox[
                    DynamicBox[
                    FEPrivate`FrontEndResource[
                    "FEBitmaps", "SummaryBoxOpener"]], 
                    ButtonFunction :> (Typeset`open$$ = True), Appearance -> 
                    None, BaseStyle -> {}, Evaluator -> Automatic, Method -> 
                    "Preemptive"], Alignment -> {Center, Center}, ImageSize -> 
                    Dynamic[{Automatic, 
                    3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                    Magnification])}]], 
                    GridBox[{{
                    RowBox[{
                    TagBox["\"Pattern: \"", "SummaryItemAnnotation"], 
                    "\[InvisibleSpace]", 
                    TagBox[
                    TemplateBox[{
                    RowBox[{"f", "[", 
                    RowBox[{"x_", ",", "x_"}], "]"}]}, "ClickToCopy"], 
                    "SummaryItem"]}]}}, 
                    GridBoxAlignment -> {
                    "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, 
                    AutoDelete -> False, 
                    GridBoxItemSize -> {
                    "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
                    GridBoxSpacings -> {
                    "Columns" -> {{2}}, "Rows" -> {{Automatic}}}, 
                    BaseStyle -> {
                    ShowStringCharacters -> False, NumberMarks -> False, 
                    PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
                    GridBoxAlignment -> {
                    "Columns" -> {{Left}}, "Rows" -> {{Top}}}, AutoDelete -> 
                    False, GridBoxItemSize -> {
                    "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
                    BaselinePosition -> {1, 1}], True -> GridBox[{{
                    PaneBox[
                    ButtonBox[
                    DynamicBox[
                    FEPrivate`FrontEndResource[
                    "FEBitmaps", "SummaryBoxCloser"]], 
                    ButtonFunction :> (Typeset`open$$ = False), Appearance -> 
                    None, BaseStyle -> {}, Evaluator -> Automatic, Method -> 
                    "Preemptive"], Alignment -> {Center, Center}, ImageSize -> 
                    Dynamic[{Automatic, 
                    3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                    Magnification])}]], 
                    GridBox[{{
                    RowBox[{
                    TagBox["\"Pattern: \"", "SummaryItemAnnotation"], 
                    "\[InvisibleSpace]", 
                    TagBox[
                    TemplateBox[{
                    RowBox[{"f", "[", 
                    RowBox[{"x_", ",", "x_"}], "]"}]}, "ClickToCopy"], 
                    "SummaryItem"]}]}, {
                    RowBox[{
                    TagBox["\"Bytecode: \"", "SummaryItemAnnotation"], 
                    "\[InvisibleSpace]", 
                    TagBox[
                    
                    TemplateBox[{
                    "\"PUSH_EXPR\\nTEST_LENGTH 2\\nGET_HEAD\\nPUSH_SYMBOL \
HoldComplete[f]\\nSAMEQ\\nAND\\nGET_PART 1\\nBIND_VAR \
Global`x\\nPUSH_TRUE\\nGET_PART 2\\nGET_VAR Global`x\\nSAMEQ\"", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"{", "\"PUSH_EXPR\"", "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"\"TEST_LENGTH\"", ",", 
                    RowBox[{"{", 
                    RowBox[{"\"int\"", ",", "2"}], "}"}]}], "}"}], ",", 
                    RowBox[{"{", "\"GET_HEAD\"", "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"\"PUSH_SYMBOL\"", ",", 
                    RowBox[{"{", 
                    RowBox[{"\"sym\"", ",", 
                    RowBox[{"HoldComplete", "[", "f", "]"}]}], "}"}]}], "}"}],
                     ",", 
                    RowBox[{"{", "\"SAMEQ\"", "}"}], ",", 
                    RowBox[{"{", "\"AND\"", "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"\"GET_PART\"", ",", 
                    RowBox[{"{", 
                    RowBox[{"\"int\"", ",", "1"}], "}"}]}], "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"\"BIND_VAR\"", ",", 
                    RowBox[{"{", 
                    RowBox[{"\"var\"", ",", "\"Global`x\""}], "}"}]}], "}"}], 
                    ",", 
                    RowBox[{"{", "\"PUSH_TRUE\"", "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"\"GET_PART\"", ",", 
                    RowBox[{"{", 
                    RowBox[{"\"int\"", ",", "2"}], "}"}]}], "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"\"GET_VAR\"", ",", 
                    RowBox[{"{", 
                    RowBox[{"\"var\"", ",", "\"Global`x\""}], "}"}]}], "}"}], 
                    ",", 
                    RowBox[{"{", "\"SAMEQ\"", "}"}]}], "}"}]}, 
                    "ClickToCopy2"], "SummaryItem"]}]}}, 
                    GridBoxAlignment -> {
                    "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, 
                    AutoDelete -> False, 
                    GridBoxItemSize -> {
                    "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
                    GridBoxSpacings -> {
                    "Columns" -> {{2}}, "Rows" -> {{Automatic}}}, 
                    BaseStyle -> {
                    ShowStringCharacters -> False, NumberMarks -> False, 
                    PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
                    GridBoxAlignment -> {
                    "Columns" -> {{Left}}, "Rows" -> {{Top}}}, AutoDelete -> 
                    False, GridBoxItemSize -> {
                    "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
                    BaselinePosition -> {1, 1}]}, 
                    Dynamic[Typeset`open$$], ImageSize -> Automatic]}, 
                    "SummaryPanel"], DynamicModuleValues :> {}], "]"}], 
                   
                   DanielS`PatternMatcherVM`PatternBytecode[<|
                    "Pattern" -> $CellContext`f[
                    Pattern[$CellContext`x, 
                    Blank[]], 
                    Pattern[$CellContext`x, 
                    Blank[]]], 
                    "Bytecode" -> {{"PUSH_EXPR"}, {
                    "TEST_LENGTH", {"int", 2}}, {"GET_HEAD"}, {
                    "PUSH_SYMBOL", {"sym", 
                    HoldComplete[$CellContext`f]}}, {"SAMEQ"}, {"AND"}, {
                    "GET_PART", {"int", 1}}, {
                    "BIND_VAR", {"var", "Global`x"}}, {"PUSH_TRUE"}, {
                    "GET_PART", {"int", 2}}, {
                    "GET_VAR", {"var", "Global`x"}}, {"SAMEQ"}}, 
                    "LexicalEnvironment" -> <|"Global`x" -> 2|>, 
                    "CurrentExpr" -> 0, "VarCounter" -> 1|>], Selectable -> 
                   False, Editable -> False, SelectWithContents -> True], 
                  "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"Bound variables: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                  RowBox[{"\[LeftAssociation]", "\[RightAssociation]"}], 
                  "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"Cycles: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["0", "SummaryItem"]}]}}, 
             GridBoxAlignment -> {
              "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, AutoDelete -> 
             False, GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {"Columns" -> {{2}}, "Rows" -> {{Automatic}}},
              BaseStyle -> {
              ShowStringCharacters -> False, NumberMarks -> False, 
               PrintPrecision -> 3, ShowSyntaxStyles -> False}]}}, 
          GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
          AutoDelete -> False, 
          GridBoxItemSize -> {
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
          BaselinePosition -> {1, 1}]}, 
       Dynamic[Typeset`open$$], ImageSize -> Automatic]},
     "SummaryPanel"],
    DynamicModuleValues:>{}], "]"}],
  DanielS`PatternMatcherVM`PatternMatcherVirtualMachine[<|
   "PatternBytecode" -> 
    DanielS`PatternMatcherVM`PatternBytecode[<|"Pattern" -> $CellContext`f[
         Pattern[$CellContext`x, 
          Blank[]], 
         Pattern[$CellContext`x, 
          Blank[]]], 
       "Bytecode" -> {{"PUSH_EXPR"}, {"TEST_LENGTH", {"int", 2}}, {
         "GET_HEAD"}, {"PUSH_SYMBOL", {"sym", 
           HoldComplete[$CellContext`f]}}, {"SAMEQ"}, {"AND"}, {
         "GET_PART", {"int", 1}}, {"BIND_VAR", {"var", "Global`x"}}, {
         "PUSH_TRUE"}, {"GET_PART", {"int", 2}}, {
         "GET_VAR", {"var", "Global`x"}}, {"SAMEQ"}}, 
       "LexicalEnvironment" -> <|"Global`x" -> 2|>, "CurrentExpr" -> 0, 
       "VarCounter" -> 1|>], "CurrentExpression" -> 
    DataStructure["Value", {"Data" -> Undefined}], "ProgramCounter" -> 
    DataStructure["Counter", {"Data" -> 1}], "Stack" -> 
    DataStructure["Stack", {"Data" -> {}}], "BoundVariables" -> 
    DataStructure["HashTable", {"Data" -> {}}], "Halted" -> 
    DataStructure["Value", {"Data" -> False}], "Cycles" -> 
    DataStructure["Counter", {"Data" -> 0}]|>],
  Editable->False,
  SelectWithContents->True,
  Selectable->False]], "Output",
 CellChangeTimes->{3.9606474388149548`*^9},
 CellLabel->"Out[18]=",
 CellID->738382762,ExpressionUUID->"2a8c968c-5d5c-430c-ab20-207f88b85e9c"]
}, Open  ]],

Cell["\<\
Test whether an expression matches the pattern stored in the virtual machine:\
\
\>", "ExampleText",
 CellChangeTimes->{{3.960647351624917*^9, 3.960647361956934*^9}, {
  3.960647425353674*^9, 3.960647433105589*^9}, {3.96064749887031*^9, 
  3.960647530218203*^9}},
 CellID->1838568568,ExpressionUUID->"a92a523f-45c6-4b27-8405-c3e84b01599d"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"PatternMatcherMatch", "[", 
  RowBox[{"vm", ",", 
   RowBox[{"f", "[", 
    RowBox[{"1", ",", "1"}], "]"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.960647532291903*^9, 3.960647541454258*^9}},
 CellLabel->"In[19]:=",
 CellID->321092041,ExpressionUUID->"06d0fd64-2675-4de0-a792-5c08e1e08ce3"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{
   TagBox["PatternMatcherVirtualMachine",
    "SummaryHead"], "[", 
   DynamicModuleBox[{Typeset`open$$ = False, Typeset`embedState$$ = "Ready"}, 
    
    TemplateBox[{
      PaneSelectorBox[{False -> GridBox[{{
            PaneBox[
             ButtonBox[
              DynamicBox[
               FEPrivate`FrontEndResource["FEBitmaps", "SummaryBoxOpener"], 
               ImageSizeCache -> {
                9.875531250000002, {0., 9.875531250000002}}], Appearance -> 
              None, BaseStyle -> {}, 
              ButtonFunction :> (Typeset`open$$ = True), Evaluator -> 
              Automatic, Method -> "Preemptive"], 
             Alignment -> {Center, Center}, ImageSize -> 
             Dynamic[{
               Automatic, 
                3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                 Magnification])}]], 
            GridBox[{{
               RowBox[{
                 TagBox["\"Halted: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["True", "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"Program counter: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["1", "SummaryItem"]}]}}, AutoDelete -> False, 
             BaseStyle -> {
              ShowStringCharacters -> False, NumberMarks -> False, 
               PrintPrecision -> 3, ShowSyntaxStyles -> False}, 
             GridBoxAlignment -> {
              "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, 
             GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {
              "Columns" -> {{2}}, "Rows" -> {{Automatic}}}]}}, AutoDelete -> 
          False, BaselinePosition -> {1, 1}, 
          GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
          GridBoxItemSize -> {
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}], True -> 
        GridBox[{{
            PaneBox[
             ButtonBox[
              DynamicBox[
               FEPrivate`FrontEndResource["FEBitmaps", "SummaryBoxCloser"], 
               ImageSizeCache -> {
                9.875531250000002, {0., 9.875531250000002}}], Appearance -> 
              None, BaseStyle -> {}, 
              ButtonFunction :> (Typeset`open$$ = False), Evaluator -> 
              Automatic, Method -> "Preemptive"], 
             Alignment -> {Center, Center}, ImageSize -> 
             Dynamic[{
               Automatic, 
                3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                 Magnification])}]], 
            GridBox[{{
               RowBox[{
                 TagBox["\"Halted: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["True", "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"Program counter: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["1", "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"Stack: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                  RowBox[{"{", "}"}], "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"Pattern bytecode: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                  InterpretationBox[
                   RowBox[{
                    TagBox["PatternBytecode", "SummaryHead"], "[", 
                    
                    DynamicModuleBox[{
                    Typeset`open$$ = False, Typeset`embedState$$ = "Ready"}, 
                    TemplateBox[{
                    PaneSelectorBox[{False -> GridBox[{{
                    PaneBox[
                    ButtonBox[
                    DynamicBox[
                    FEPrivate`FrontEndResource[
                    "FEBitmaps", "SummaryBoxOpener"], 
                    ImageSizeCache -> {7.900425, {0., 7.900425000000001}}], 
                    Appearance -> None, BaseStyle -> {}, 
                    ButtonFunction :> (Typeset`open$$ = True), Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    Alignment -> {Center, Center}, ImageSize -> 
                    Dynamic[{Automatic, 
                    3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                    Magnification])}]], 
                    GridBox[{{
                    RowBox[{
                    TagBox["\"Pattern: \"", "SummaryItemAnnotation"], 
                    "\[InvisibleSpace]", 
                    TagBox[
                    TemplateBox[{
                    RowBox[{"f", "[", 
                    RowBox[{"x_", ",", "x_"}], "]"}]}, "ClickToCopy"], 
                    "SummaryItem"]}]}}, AutoDelete -> False, 
                    BaseStyle -> {
                    ShowStringCharacters -> False, NumberMarks -> False, 
                    PrintPrecision -> 3, ShowSyntaxStyles -> False}, 
                    GridBoxAlignment -> {
                    "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, 
                    GridBoxItemSize -> {
                    "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
                    GridBoxSpacings -> {
                    "Columns" -> {{2}}, "Rows" -> {{Automatic}}}]}}, 
                    AutoDelete -> False, BaselinePosition -> {1, 1}, 
                    GridBoxAlignment -> {
                    "Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
                    GridBoxItemSize -> {
                    "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}], 
                    True -> GridBox[{{
                    PaneBox[
                    ButtonBox[
                    DynamicBox[
                    FEPrivate`FrontEndResource[
                    "FEBitmaps", "SummaryBoxCloser"]], Appearance -> None, 
                    BaseStyle -> {}, 
                    ButtonFunction :> (Typeset`open$$ = False), Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    Alignment -> {Center, Center}, ImageSize -> 
                    Dynamic[{Automatic, 
                    3.5 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                    Magnification])}]], 
                    GridBox[{{
                    RowBox[{
                    TagBox["\"Pattern: \"", "SummaryItemAnnotation"], 
                    "\[InvisibleSpace]", 
                    TagBox[
                    TemplateBox[{
                    RowBox[{"f", "[", 
                    RowBox[{"x_", ",", "x_"}], "]"}]}, "ClickToCopy"], 
                    "SummaryItem"]}]}, {
                    RowBox[{
                    TagBox["\"Bytecode: \"", "SummaryItemAnnotation"], 
                    "\[InvisibleSpace]", 
                    TagBox[
                    
                    TemplateBox[{
                    "\"PUSH_EXPR\\nTEST_LENGTH 2\\nGET_HEAD\\nPUSH_SYMBOL \
HoldComplete[f]\\nSAMEQ\\nAND\\nGET_PART 1\\nBIND_VAR \
Global`x\\nPUSH_TRUE\\nGET_PART 2\\nGET_VAR Global`x\\nSAMEQ\"", 
                    RowBox[{"{", 
                    RowBox[{
                    RowBox[{"{", "\"PUSH_EXPR\"", "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"\"TEST_LENGTH\"", ",", 
                    RowBox[{"{", 
                    RowBox[{"\"int\"", ",", "2"}], "}"}]}], "}"}], ",", 
                    RowBox[{"{", "\"GET_HEAD\"", "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"\"PUSH_SYMBOL\"", ",", 
                    RowBox[{"{", 
                    RowBox[{"\"sym\"", ",", 
                    RowBox[{"HoldComplete", "[", "f", "]"}]}], "}"}]}], "}"}],
                     ",", 
                    RowBox[{"{", "\"SAMEQ\"", "}"}], ",", 
                    RowBox[{"{", "\"AND\"", "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"\"GET_PART\"", ",", 
                    RowBox[{"{", 
                    RowBox[{"\"int\"", ",", "1"}], "}"}]}], "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"\"BIND_VAR\"", ",", 
                    RowBox[{"{", 
                    RowBox[{"\"var\"", ",", "\"Global`x\""}], "}"}]}], "}"}], 
                    ",", 
                    RowBox[{"{", "\"PUSH_TRUE\"", "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"\"GET_PART\"", ",", 
                    RowBox[{"{", 
                    RowBox[{"\"int\"", ",", "2"}], "}"}]}], "}"}], ",", 
                    RowBox[{"{", 
                    RowBox[{"\"GET_VAR\"", ",", 
                    RowBox[{"{", 
                    RowBox[{"\"var\"", ",", "\"Global`x\""}], "}"}]}], "}"}], 
                    ",", 
                    RowBox[{"{", "\"SAMEQ\"", "}"}]}], "}"}]}, 
                    "ClickToCopy2"], "SummaryItem"]}]}}, AutoDelete -> False, 
                    BaseStyle -> {
                    ShowStringCharacters -> False, NumberMarks -> False, 
                    PrintPrecision -> 3, ShowSyntaxStyles -> False}, 
                    GridBoxAlignment -> {
                    "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, 
                    GridBoxItemSize -> {
                    "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
                    GridBoxSpacings -> {
                    "Columns" -> {{2}}, "Rows" -> {{Automatic}}}]}}, 
                    AutoDelete -> False, BaselinePosition -> {1, 1}, 
                    GridBoxAlignment -> {
                    "Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
                    GridBoxItemSize -> {
                    "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}]}, 
                    Dynamic[Typeset`open$$], ImageSize -> Automatic]}, 
                    "SummaryPanel"], DynamicModuleValues :> {}], "]"}], 
                   
                   DanielS`PatternMatcherVM`PatternBytecode[<|
                    "Pattern" -> $CellContext`f[
                    Pattern[$CellContext`x, 
                    Blank[]], 
                    Pattern[$CellContext`x, 
                    Blank[]]], 
                    "Bytecode" -> {{"PUSH_EXPR"}, {
                    "TEST_LENGTH", {"int", 2}}, {"GET_HEAD"}, {
                    "PUSH_SYMBOL", {"sym", 
                    HoldComplete[$CellContext`f]}}, {"SAMEQ"}, {"AND"}, {
                    "GET_PART", {"int", 1}}, {
                    "BIND_VAR", {"var", "Global`x"}}, {"PUSH_TRUE"}, {
                    "GET_PART", {"int", 2}}, {
                    "GET_VAR", {"var", "Global`x"}}, {"SAMEQ"}}, 
                    "LexicalEnvironment" -> <|"Global`x" -> 2|>, 
                    "CurrentExpr" -> 0, "VarCounter" -> 1|>], Editable -> 
                   False, SelectWithContents -> True, Selectable -> False], 
                  "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"Bound variables: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox[
                  RowBox[{"\[LeftAssociation]", "\[RightAssociation]"}], 
                  "SummaryItem"]}]}, {
               RowBox[{
                 TagBox["\"Cycles: \"", "SummaryItemAnnotation"], 
                 "\[InvisibleSpace]", 
                 TagBox["0", "SummaryItem"]}]}}, AutoDelete -> False, 
             BaseStyle -> {
              ShowStringCharacters -> False, NumberMarks -> False, 
               PrintPrecision -> 3, ShowSyntaxStyles -> False}, 
             GridBoxAlignment -> {
              "Columns" -> {{Left}}, "Rows" -> {{Automatic}}}, 
             GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {
              "Columns" -> {{2}}, "Rows" -> {{Automatic}}}]}}, AutoDelete -> 
          False, BaselinePosition -> {1, 1}, 
          GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
          GridBoxItemSize -> {
           "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}]}, 
       Dynamic[Typeset`open$$], ImageSize -> Automatic]},
     "SummaryPanel"],
    DynamicModuleValues:>{}], "]"}],
  DanielS`PatternMatcherVM`PatternMatcherVirtualMachine[<|
   "PatternBytecode" -> 
    DanielS`PatternMatcherVM`PatternBytecode[<|"Pattern" -> $CellContext`f[
         Pattern[$CellContext`x, 
          Blank[]], 
         Pattern[$CellContext`x, 
          Blank[]]], 
       "Bytecode" -> {{"PUSH_EXPR"}, {"TEST_LENGTH", {"int", 2}}, {
         "GET_HEAD"}, {"PUSH_SYMBOL", {"sym", 
           HoldComplete[$CellContext`f]}}, {"SAMEQ"}, {"AND"}, {
         "GET_PART", {"int", 1}}, {"BIND_VAR", {"var", "Global`x"}}, {
         "PUSH_TRUE"}, {"GET_PART", {"int", 2}}, {
         "GET_VAR", {"var", "Global`x"}}, {"SAMEQ"}}, 
       "LexicalEnvironment" -> <|"Global`x" -> 2|>, "CurrentExpr" -> 0, 
       "VarCounter" -> 1|>], "CurrentExpression" -> 
    DataStructure["Value", {"Data" -> $CellContext`f[1, 1]}], 
    "ProgramCounter" -> DataStructure["Counter", {"Data" -> 1}], "Stack" -> 
    DataStructure["Stack", {"Data" -> {}}], "BoundVariables" -> 
    DataStructure["HashTable", {"Data" -> {}}], "Halted" -> 
    DataStructure["Value", {"Data" -> True}], "Cycles" -> 
    DataStructure["Counter", {"Data" -> 0}]|>],
  Editable->False,
  SelectWithContents->True,
  Selectable->False]], "Output",
 CellChangeTimes->{3.960647541762089*^9},
 CellLabel->"Out[19]=",
 CellID->543616820,ExpressionUUID->"14271c98-1aa7-4c2b-976a-dc451c29ef34"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[{
 "More Examples",
 Cell[BoxData[
  TemplateBox[{"MoreExamples", 
    Cell[
     BoxData[
      FrameBox[
       Cell["Extended examples in standardized sections.", "MoreInfoText"], 
       BaseStyle -> "IFrameBox"]], "MoreInfoTextOuter"]},
   "MoreInfoOpenerButtonTemplate"]],ExpressionUUID->
  "0e6dc9bd-7b90-49f8-9db2-55eeb2239d0e"]
}], "ExtendedExamplesSection",
 CellTags->"ExtendedExamples",
 CellID->1840028041,ExpressionUUID->"9cbbad91-234e-43ca-8894-bd2f6d05d7ef"],

Cell[BoxData[
 InterpretationBox[Cell[
  "Scope", "ExampleSection",ExpressionUUID->
   "5d2ab214-1182-42f3-8b2f-8ca21f8a3259"],
  $Line = 0; Null]], "ExampleSection",
 CellID->1586768287,ExpressionUUID->"b728dfdd-0990-4e76-9c7f-74859d3d12c6"],

Cell[BoxData[
 InterpretationBox[Cell[
  "Generalizations & Extensions", "ExampleSection",ExpressionUUID->
   "a0c5d6b7-9cc9-4f66-87e0-a43b972b40ff"],
  $Line = 0; Null]], "ExampleSection",
 CellID->1362671163,ExpressionUUID->"41d702f9-6b30-4b0d-a2c1-190d897924fc"],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "Options", "ExampleSection",ExpressionUUID->
   "2ad117d5-cb0a-4e32-befe-4a9f0d856e9b"],
  $Line = 0; Null]], "ExampleSection",
 CellID->1648624933,ExpressionUUID->"040d388b-da31-4b59-8ba7-c9ac6c04cd7c"],

Cell[BoxData[
 InterpretationBox[Cell[
  "XXXX", "ExampleSubsection",ExpressionUUID->
   "c8767d7c-f0bd-4584-ae01-e89b4dd39f44"],
  $Line = 0; Null]], "ExampleSubsection",
 CellID->1605235337,ExpressionUUID->"3385ed69-341a-4caf-9091-87b5bad36581"],

Cell[BoxData[
 InterpretationBox[Cell[
  "XXXX", "ExampleSubsection",ExpressionUUID->
   "9468672c-534d-461c-bf54-0436603a4ecf"],
  $Line = 0; Null]], "ExampleSubsection",
 CellID->353251698,ExpressionUUID->"bcc2e012-c6b1-4be1-99c5-900fdb63894e"]
}, Open  ]],

Cell[BoxData[
 InterpretationBox[Cell[
  "Applications", "ExampleSection",ExpressionUUID->
   "e05524b8-8771-4a85-b169-973965017d26"],
  $Line = 0; Null]], "ExampleSection",
 CellID->1456487978,ExpressionUUID->"b637ce24-cab9-4ee9-94e7-0e1ebff7c46e"],

Cell[BoxData[
 InterpretationBox[Cell[
  "Properties & Relations", "ExampleSection",ExpressionUUID->
   "ad0f876d-e1b9-44c2-aebc-0276a4214f5f"],
  $Line = 0; Null]], "ExampleSection",
 CellID->27354093,ExpressionUUID->"7ddfd9c8-5ef7-47b5-b53e-7de028cc2656"],

Cell[BoxData[
 InterpretationBox[Cell[
  "Possible Issues", "ExampleSection",ExpressionUUID->
   "8d15f2ce-adb0-4097-b9c0-6899e451b9b8"],
  $Line = 0; Null]], "ExampleSection",
 CellID->178740593,ExpressionUUID->"fa058d38-916e-4ef7-aeb0-4947da34c4a9"],

Cell[BoxData[
 InterpretationBox[Cell[
  "Interactive Examples", "ExampleSection",ExpressionUUID->
   "2788a841-365d-4a2c-82b3-140d068de00a"],
  $Line = 0; Null]], "ExampleSection",
 CellID->1911008045,ExpressionUUID->"8f9d5f65-7874-4a5a-8717-2773a7738bec"],

Cell[BoxData[
 InterpretationBox[Cell[
  "Neat Examples", "ExampleSection",ExpressionUUID->
   "5fe49241-c4dc-487c-881b-44f78f4e4f91"],
  $Line = 0; Null]], "ExampleSection",
 CellID->546787783,ExpressionUUID->"edf3a5c9-c186-4e96-94ec-88a59af9af6b"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Metadata", "MetadataSection",
 CellID->779743368,ExpressionUUID->"a932332d-9270-4f10-9387-c048cc7f0e4d"],

Cell[TextData[{
 "New in: ",
 Cell["XX", "HistoryData",
  CellTags->"New",ExpressionUUID->"53298b0f-e747-4d9c-99e5-10edc3f67779"],
 " | Modified in: ",
 Cell[" ", "HistoryData",
  CellTags->"Modified",ExpressionUUID->"0c38236f-537e-4f7e-9b38-ee7076d5d8f4"],
 " | Obsolete in: ",
 Cell[" ", "HistoryData",
  CellTags->"Obsolete",ExpressionUUID->
  "78ce519d-0e09-46b4-a969-8b985be4f38d"]
}], "History",
 CellID->1201571982,ExpressionUUID->"2c6d9989-6320-4fd1-a8da-84aade45abd4"],

Cell[CellGroupData[{

Cell[TextData[{
 "Categorization",
 Cell[BoxData[
  TemplateBox[{"Metadata", 
    Cell[
     BoxData[
      FrameBox[
       Cell[
       "Metadata such as page URI, context, and type of documentation page.", 
        "MoreInfoText"], BaseStyle -> "IFrameBox"]], "MoreInfoTextOuter"]},
   "MoreInfoOpenerButtonTemplate"]],ExpressionUUID->
  "3ccbb6b6-53c2-4d1e-abce-b5a3dc5a002f"]
}], "CategorizationSection",
 CellID->2031568733,ExpressionUUID->"9d6ebd7d-6399-498e-9c49-d5b1f119ade4"],

Cell["Symbol", "Categorization",
 CellLabel->"Entity Type",
 CellID->1733191878,ExpressionUUID->"1efe2efd-b73c-4da5-bd80-bcb04b345be7"],

Cell["DanielS/PatternMatcherVM", "Categorization",
 CellLabel->"Paclet Name",
 CellID->1936066125,ExpressionUUID->"c289d6e3-f95b-4bc6-befb-da57efcbd8c9"],

Cell["DanielS`PatternMatcherVM`", "Categorization",
 CellLabel->"Context",
 CellID->791143531,ExpressionUUID->"1f66a337-8adf-463d-b4e9-962eae6b2e0e"],

Cell["DanielS/PatternMatcherVM/ref/CompilePatternToBytecode", "Categorization",
 CellLabel->"URI",
 CellID->1678066940,ExpressionUUID->"c2472316-b411-46f9-8a89-3a556350a72d"]
}, Closed]],

Cell[CellGroupData[{

Cell["Keywords", "KeywordsSection",
 CellID->1059462823,ExpressionUUID->"588dc67f-5c38-40c4-9866-bd74fe215987"],

Cell["XXXX", "Keywords",
 CellID->1604748884,ExpressionUUID->"066617bb-6a54-4efd-9ce6-d3deb12b4f9f"]
}, Closed]],

Cell[CellGroupData[{

Cell["Syntax Templates", "TemplatesSection",
 CellID->767370715,ExpressionUUID->"1be5bc74-0776-43e3-9651-fb55b246b958"],

Cell[BoxData[""], "Template",
 CellLabel->"Additional Function Template",
 CellID->1560306770,ExpressionUUID->"d0c3572a-82cb-413f-bf2e-9b84a430eb51"],

Cell[BoxData[""], "Template",
 CellLabel->"Arguments Pattern",
 CellID->1153069873,ExpressionUUID->"0164aebe-49d3-42a9-b0d0-1d6a884ea6b6"],

Cell[BoxData[""], "Template",
 CellLabel->"Local Variables",
 CellID->752924983,ExpressionUUID->"f7e7d7c0-ebe6-4a51-8501-a4caf3c351fd"],

Cell[BoxData[""], "Template",
 CellLabel->"Color Equal Signs",
 CellID->1436541157,ExpressionUUID->"1821aa65-d1aa-4a93-8e4f-087730b65513"]
}, Closed]]
}, Open  ]]
},
WindowSize->{700, 770},
WindowMargins->{{5, Automatic}, {Automatic, 0}},
TaggingRules-><|"Paclet" -> "DanielS/PatternMatcherVM"|>,
CellContext->"Global`",
FrontEndVersion->"14.3 for Mac OS X ARM (64-bit) (June 26, 2025)",
StyleDefinitions->FrontEnd`FileName[{"Wolfram"}, "FunctionPageStylesExt.nb", 
  CharacterEncoding -> "UTF-8"],
ExpressionUUID->"4b123b97-a670-4515-8446-e85241900301"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{
 "ExtendedExamples"->{
  Cell[43996, 1006, 488, 13, 56, "ExtendedExamplesSection",ExpressionUUID->"9cbbad91-234e-43ca-8894-bd2f6d05d7ef",
   CellTags->"ExtendedExamples",
   CellID->1840028041]}
 }
*)
(*CellTagsIndex
CellTagsIndex->{
 {"ExtendedExamples", 50332, 1194}
 }
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[576, 22, 122, 1, 72, "ObjectName",ExpressionUUID->"a177e5dd-4cac-4314-913c-44b4bb2d9225",
 CellID->1932181080],
Cell[701, 25, 618, 14, 76, "Usage",ExpressionUUID->"6c6c1894-1499-4ab0-bfd4-ddd35b734f5a",
 CellID->2067185273],
Cell[1322, 41, 476, 11, 26, "Notes",ExpressionUUID->"ca996759-1bf3-4ce0-946d-5cad530b1aa0",
 CellID->1192442145],
Cell[1801, 54, 420, 10, 26, "Notes",ExpressionUUID->"c32bc7d6-6320-4edd-89c9-33176855cfd5",
 CellID->835744468]
}, Open  ]],
Cell[CellGroupData[{
Cell[2258, 69, 459, 13, 38, "SeeAlsoSection",ExpressionUUID->"3fa5780a-4835-4279-8731-2194f63b7ed9",
 CellID->1057737211],
Cell[2720, 84, 2820, 69, 36, "SeeAlso",ExpressionUUID->"722a4544-d503-4cef-a816-c309b5bad9a8",
 CellID->519675411]
}, Open  ]],
Cell[CellGroupData[{
Cell[5577, 158, 435, 12, 39, "TechNotesSection",ExpressionUUID->"f59f5083-9df2-41e8-96ce-4180c34fe222",
 CellID->368640328],
Cell[6015, 172, 100, 1, 17, "Tutorials",ExpressionUUID->"82b52c0d-6454-4edb-903e-cc1862d0ad94",
 CellID->247671101]
}, Open  ]],
Cell[CellGroupData[{
Cell[6152, 178, 117, 1, 37, "MoreAboutSection",ExpressionUUID->"7f923b22-ecdc-4140-b437-661f5c891a3f",
 CellID->784886621],
Cell[6272, 181, 332, 6, 17, "MoreAbout",ExpressionUUID->"2fc837e6-b864-44e1-8e89-68ae90ae79cc",
 CellID->1744879273]
}, Open  ]],
Cell[CellGroupData[{
Cell[6641, 192, 472, 13, 38, "RelatedLinksSection",ExpressionUUID->"1cb0a833-17ae-4c85-a5ce-5f2fdf4ebe1b",
 CellID->149257879],
Cell[7116, 207, 103, 1, 17, "RelatedLinks",ExpressionUUID->"a921b8e2-564b-44d9-a48b-10e9a260843a",
 CellID->316272657]
}, Open  ]],
Cell[CellGroupData[{
Cell[7256, 213, 530, 14, 68, "ExamplesInitializationSection",ExpressionUUID->"c18bbe72-a682-4eca-bd7c-02733188f7f6",
 CellID->572519874],
Cell[7789, 229, 185, 3, 46, "ExampleInitialization",ExpressionUUID->"8d37789e-7429-4786-a158-de7605896921",
 CellID->1614783758]
}, Open  ]],
Cell[CellGroupData[{
Cell[8011, 237, 443, 12, 70, "PrimaryExamplesSection",ExpressionUUID->"df914ba9-2912-4788-af06-8e911aa51f57",
 CellID->1919773567],
Cell[8457, 251, 205, 2, 23, "ExampleText",ExpressionUUID->"a704b8e1-efc5-4cb0-aa14-f722fda5727f",
 CellID->739927290],
Cell[CellGroupData[{
Cell[8687, 257, 372, 8, 26, "Input",ExpressionUUID->"8500a56d-9722-4407-8084-f5289fd1f328",
 CellID->5270763],
Cell[9062, 267, 6763, 147, 49, "Output",ExpressionUUID->"88152b38-84a0-4ccd-a5fa-25c45bf63c91",
 CellID->1075743001]
}, Open  ]],
Cell[15840, 417, 266, 3, 23, "ExampleText",ExpressionUUID->"6a30b488-85fc-40e4-b3ba-2f00e0b5427f",
 CellID->347793714],
Cell[CellGroupData[{
Cell[16131, 424, 282, 6, 26, "Input",ExpressionUUID->"8872eb90-1dd5-4dc2-8743-2c440513159d",
 CellID->1063267939],
Cell[16416, 432, 13241, 268, 49, "Output",ExpressionUUID->"2a8c968c-5d5c-430c-ab20-207f88b85e9c",
 CellID->738382762]
}, Open  ]],
Cell[29672, 703, 349, 7, 23, "ExampleText",ExpressionUUID->"a92a523f-45c6-4b27-8405-c3e84b01599d",
 CellID->1838568568],
Cell[CellGroupData[{
Cell[30046, 714, 315, 7, 26, "Input",ExpressionUUID->"06d0fd64-2675-4de0-a792-5c08e1e08ce3",
 CellID->321092041],
Cell[30364, 723, 13583, 277, 49, "Output",ExpressionUUID->"14271c98-1aa7-4c2b-976a-dc451c29ef34",
 CellID->543616820]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[43996, 1006, 488, 13, 56, "ExtendedExamplesSection",ExpressionUUID->"9cbbad91-234e-43ca-8894-bd2f6d05d7ef",
 CellTags->"ExtendedExamples",
 CellID->1840028041],
Cell[44487, 1021, 242, 5, 32, "ExampleSection",ExpressionUUID->"b728dfdd-0990-4e76-9c7f-74859d3d12c6",
 CellID->1586768287],
Cell[44732, 1028, 265, 5, 20, "ExampleSection",ExpressionUUID->"41d702f9-6b30-4b0d-a2c1-190d897924fc",
 CellID->1362671163],
Cell[CellGroupData[{
Cell[45022, 1037, 244, 5, 20, "ExampleSection",ExpressionUUID->"040d388b-da31-4b59-8ba7-c9ac6c04cd7c",
 CellID->1648624933],
Cell[45269, 1044, 247, 5, 23, "ExampleSubsection",ExpressionUUID->"3385ed69-341a-4caf-9091-87b5bad36581",
 CellID->1605235337],
Cell[45519, 1051, 246, 5, 19, "ExampleSubsection",ExpressionUUID->"bcc2e012-c6b1-4be1-99c5-900fdb63894e",
 CellID->353251698]
}, Open  ]],
Cell[45780, 1059, 249, 5, 32, "ExampleSection",ExpressionUUID->"b637ce24-cab9-4ee9-94e7-0e1ebff7c46e",
 CellID->1456487978],
Cell[46032, 1066, 257, 5, 20, "ExampleSection",ExpressionUUID->"7ddfd9c8-5ef7-47b5-b53e-7de028cc2656",
 CellID->27354093],
Cell[46292, 1073, 251, 5, 20, "ExampleSection",ExpressionUUID->"fa058d38-916e-4ef7-aeb0-4947da34c4a9",
 CellID->178740593],
Cell[46546, 1080, 257, 5, 20, "ExampleSection",ExpressionUUID->"8f9d5f65-7874-4a5a-8717-2773a7738bec",
 CellID->1911008045],
Cell[46806, 1087, 249, 5, 20, "ExampleSection",ExpressionUUID->"edf3a5c9-c186-4e96-94ec-88a59af9af6b",
 CellID->546787783]
}, Open  ]],
Cell[CellGroupData[{
Cell[47092, 1097, 110, 1, 71, "MetadataSection",ExpressionUUID->"a932332d-9270-4f10-9387-c048cc7f0e4d",
 CellID->779743368],
Cell[47205, 1100, 477, 12, 25, "History",ExpressionUUID->"2c6d9989-6320-4fd1-a8da-84aade45abd4",
 CellID->1201571982],
Cell[CellGroupData[{
Cell[47707, 1116, 485, 13, 20, "CategorizationSection",ExpressionUUID->"9d6ebd7d-6399-498e-9c49-d5b1f119ade4",
 CellID->2031568733],
Cell[48195, 1131, 135, 2, 34, "Categorization",ExpressionUUID->"1efe2efd-b73c-4da5-bd80-bcb04b345be7",
 CellID->1733191878],
Cell[48333, 1135, 153, 2, 34, "Categorization",ExpressionUUID->"c289d6e3-f95b-4bc6-befb-da57efcbd8c9",
 CellID->1936066125],
Cell[48489, 1139, 149, 2, 34, "Categorization",ExpressionUUID->"1f66a337-8adf-463d-b4e9-962eae6b2e0e",
 CellID->791143531],
Cell[48641, 1143, 174, 2, 34, "Categorization",ExpressionUUID->"c2472316-b411-46f9-8a89-3a556350a72d",
 CellID->1678066940]
}, Closed]],
Cell[CellGroupData[{
Cell[48852, 1150, 111, 1, 20, "KeywordsSection",ExpressionUUID->"588dc67f-5c38-40c4-9866-bd74fe215987",
 CellID->1059462823],
Cell[48966, 1153, 100, 1, 70, "Keywords",ExpressionUUID->"066617bb-6a54-4efd-9ce6-d3deb12b4f9f",
 CellID->1604748884]
}, Closed]],
Cell[CellGroupData[{
Cell[49103, 1159, 119, 1, 20, "TemplatesSection",ExpressionUUID->"1be5bc74-0776-43e3-9651-fb55b246b958",
 CellID->767370715],
Cell[49225, 1162, 149, 2, 70, "Template",ExpressionUUID->"d0c3572a-82cb-413f-bf2e-9b84a430eb51",
 CellID->1560306770],
Cell[49377, 1166, 138, 2, 70, "Template",ExpressionUUID->"0164aebe-49d3-42a9-b0d0-1d6a884ea6b6",
 CellID->1153069873],
Cell[49518, 1170, 135, 2, 70, "Template",ExpressionUUID->"f7e7d7c0-ebe6-4a51-8501-a4caf3c351fd",
 CellID->752924983],
Cell[49656, 1174, 138, 2, 70, "Template",ExpressionUUID->"1821aa65-d1aa-4a93-8e4f-087730b65513",
 CellID->1436541157]
}, Closed]]
}, Open  ]]
}
]
*)

